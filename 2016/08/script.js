var instructionsString = "rect 1x1\nrotate row y=0 by 5\nrect 1x1\nrotate row y=0 by 5\nrect 1x1\nrotate row y=0 by 5\nrect 1x1\nrotate row y=0 by 5\nrect 1x1\nrotate row y=0 by 2\nrect 1x1\nrotate row y=0 by 2\nrect 1x1\nrotate row y=0 by 3\nrect 1x1\nrotate row y=0 by 3\nrect 2x1\nrotate row y=0 by 2\nrect 1x1\nrotate row y=0 by 3\nrect 2x1\nrotate row y=0 by 2\nrect 1x1\nrotate row y=0 by 3\nrect 2x1\nrotate row y=0 by 5\nrect 4x1\nrotate row y=0 by 5\nrotate column x=0 by 1\nrect 4x1\nrotate row y=0 by 10\nrotate column x=5 by 2\nrotate column x=0 by 1\nrect 9x1\nrotate row y=2 by 5\nrotate row y=0 by 5\nrotate column x=0 by 1\nrect 4x1\nrotate row y=2 by 5\nrotate row y=0 by 5\nrotate column x=0 by 1\nrect 4x1\nrotate column x=40 by 1\nrotate column x=27 by 1\nrotate column x=22 by 1\nrotate column x=17 by 1\nrotate column x=12 by 1\nrotate column x=7 by 1\nrotate column x=2 by 1\nrotate row y=2 by 5\nrotate row y=1 by 3\nrotate row y=0 by 5\nrect 1x3\nrotate row y=2 by 10\nrotate row y=1 by 7\nrotate row y=0 by 2\nrotate column x=3 by 2\nrotate column x=2 by 1\nrotate column x=0 by 1\nrect 4x1\nrotate row y=2 by 5\nrotate row y=1 by 3\nrotate row y=0 by 3\nrect 1x3\nrotate column x=45 by 1\nrotate row y=2 by 7\nrotate row y=1 by 10\nrotate row y=0 by 2\nrotate column x=3 by 1\nrotate column x=2 by 2\nrotate column x=0 by 1\nrect 4x1\nrotate row y=2 by 13\nrotate row y=0 by 5\nrotate column x=3 by 1\nrotate column x=0 by 1\nrect 4x1\nrotate row y=3 by 10\nrotate row y=2 by 10\nrotate row y=0 by 5\nrotate column x=3 by 1\nrotate column x=2 by 1\nrotate column x=0 by 1\nrect 4x1\nrotate row y=3 by 8\nrotate row y=0 by 5\nrotate column x=3 by 1\nrotate column x=2 by 1\nrotate column x=0 by 1\nrect 4x1\nrotate row y=3 by 17\nrotate row y=2 by 20\nrotate row y=0 by 15\nrotate column x=13 by 1\nrotate column x=12 by 3\nrotate column x=10 by 1\nrotate column x=8 by 1\nrotate column x=7 by 2\nrotate column x=6 by 1\nrotate column x=5 by 1\nrotate column x=3 by 1\nrotate column x=2 by 2\nrotate column x=0 by 1\nrect 14x1\nrotate row y=1 by 47\nrotate column x=9 by 1\nrotate column x=4 by 1\nrotate row y=3 by 3\nrotate row y=2 by 10\nrotate row y=1 by 8\nrotate row y=0 by 5\nrotate column x=2 by 2\nrotate column x=0 by 2\nrect 3x2\nrotate row y=3 by 12\nrotate row y=2 by 10\nrotate row y=0 by 10\nrotate column x=8 by 1\nrotate column x=7 by 3\nrotate column x=5 by 1\nrotate column x=3 by 1\nrotate column x=2 by 1\nrotate column x=1 by 1\nrotate column x=0 by 1\nrect 9x1\nrotate row y=0 by 20\nrotate column x=46 by 1\nrotate row y=4 by 17\nrotate row y=3 by 10\nrotate row y=2 by 10\nrotate row y=1 by 5\nrotate column x=8 by 1\nrotate column x=7 by 1\nrotate column x=6 by 1\nrotate column x=5 by 1\nrotate column x=3 by 1\nrotate column x=2 by 2\nrotate column x=1 by 1\nrotate column x=0 by 1\nrect 9x1\nrotate column x=32 by 4\nrotate row y=4 by 33\nrotate row y=3 by 5\nrotate row y=2 by 15\nrotate row y=0 by 15\nrotate column x=13 by 1\nrotate column x=12 by 3\nrotate column x=10 by 1\nrotate column x=8 by 1\nrotate column x=7 by 2\nrotate column x=6 by 1\nrotate column x=5 by 1\nrotate column x=3 by 1\nrotate column x=2 by 1\nrotate column x=1 by 1\nrotate column x=0 by 1\nrect 14x1\nrotate column x=39 by 3\nrotate column x=35 by 4\nrotate column x=20 by 4\nrotate column x=19 by 3\nrotate column x=10 by 4\nrotate column x=9 by 3\nrotate column x=8 by 3\nrotate column x=5 by 4\nrotate column x=4 by 3\nrotate row y=5 by 5\nrotate row y=4 by 5\nrotate row y=3 by 33\nrotate row y=1 by 30\nrotate column x=48 by 1\nrotate column x=47 by 5\nrotate column x=46 by 5\nrotate column x=45 by 1\nrotate column x=43 by 1\nrotate column x=38 by 3\nrotate column x=37 by 3\nrotate column x=36 by 5\nrotate column x=35 by 1\nrotate column x=33 by 1\nrotate column x=32 by 5\nrotate column x=31 by 5\nrotate column x=30 by 1\nrotate column x=23 by 4\nrotate column x=22 by 3\nrotate column x=21 by 3\nrotate column x=20 by 1\nrotate column x=12 by 2\nrotate column x=11 by 2\nrotate column x=3 by 5\nrotate column x=2 by 5\nrotate column x=1 by 3\nrotate column x=0 by 4";
var rectSplitter = "x";
var instructionTypes = {
    rotate: "rotate",
    rect: "rect"
};
var rotateDirections = {
    column: "x",
    row: "y",
    x: "column",
    y: "row"
};
var displayValues = {
    0: ".",
    1: "#"
};
var instructionsArray = instructionsString.split('\n');
var instructions = [];
var display = [];
var lit = 0;
for (var _i = 0, instructionsArray_1 = instructionsArray; _i < instructionsArray_1.length; _i++) {
    var i = instructionsArray_1[_i];
    var splittedI = i.split(" ");
    var instruction = void 0;
    if (splittedI[0] === instructionTypes.rotate) {
        instruction = {
            type: instructionTypes.rotate,
            direction: rotateDirections[splittedI[1]],
            position: parseInt(splittedI[2].substr(2)),
            number: parseInt(splittedI[4])
        };
    }
    else {
        var _a = splittedI[1].split(rectSplitter), width = _a[0], height = _a[1];
        instruction = {
            type: instructionTypes.rect,
            width: parseInt(width),
            height: parseInt(height)
        };
    }
    instructions.push(instruction);
}
function createDisplay(width, height) {
    var row = height - 1;
    while (row >= 0) {
        var column = width - 1;
        display[row] = [];
        while (column >= 0) {
            display[row][column] = 0;
            column--;
        }
        row--;
    }
}
function createRect(width, height) {
    var row = height - 1;
    while (row >= 0) {
        var column = width - 1;
        while (column >= 0) {
            display[row][column] = 1;
            column--;
        }
        row--;
    }
}
function rotateX(column, number) {
    var displayLength = display.length;
    var row = display.length - 1;
    var tempDisplay = JSON.parse(JSON.stringify(display));
    while (row >= 0) {
        var rowToCopy = row - number;
        while (rowToCopy < 0) {
            rowToCopy = rowToCopy + displayLength;
        }
        display[row][column] = tempDisplay[rowToCopy][column];
        row--;
    }
}
function rotateY(row, number) {
    var tempRow = JSON.parse(JSON.stringify(display[row]));
    var rowLength = tempRow.length;
    var column = tempRow.length - 1;
    while (column >= 0) {
        var columnToCopy = column - number;
        while (columnToCopy < 0) {
            columnToCopy = columnToCopy + rowLength;
        }
        display[row][column] = tempRow[columnToCopy];
        column--;
    }
}
createDisplay(50, 6);
for (var _b = 0, instructions_1 = instructions; _b < instructions_1.length; _b++) {
    var instruction = instructions_1[_b];
    if (instruction.type === instructionTypes.rect) {
        createRect(instruction.width, instruction.height);
    }
    else if (instruction.direction === rotateDirections.column) {
        rotateX(instruction.position, instruction.number);
    }
    else {
        rotateY(instruction.position, instruction.number);
    }
}
for (var rowNr in display) {
    var rowNode = document.createElement("DIV");
    for (var _c = 0, _d = display[rowNr]; _c < _d.length; _c++) {
        var column = _d[_c];
        rowNode.innerHTML += displayValues[column];
        lit += column;
    }
    document.getElementById("display").appendChild(rowNode);
}
console.log("lit", lit);
